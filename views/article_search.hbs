
	<header id="header">      
        <div class="navbar navbar-inverse" role="banner">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>

                    <a class="navbar-brand" href="/">
                        <h1><img src="images/logo.png" alt="logo"></h1>
                    </a>
                    
                </div>
                <div class="collapse navbar-collapse">
                    <ul class="nav navbar-nav navbar-right">
                        <li><a href="/">Home</a></li>
                        <li><a href="/team">The Team</a></li>                    
                        <li><a href="/publications">Publications</a></li>
                        <li class="active"><a href="/datacenter">Data Center</a></li>
                        <li><a href="http://oprs.pesitsouthscibase.org">OPRS</a></li>               
                    </ul>
                    </ul>
                </div>
                <div class="search">
                    <form role="form">
                        <i class="fa fa-search"></i>
                        <div class="field-toggle">
                            <input type="text" class="search-form" autocomplete="off" placeholder="Search">
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </header>
    <!--/#header-->


    <section id="page-breadcrumb">
        <div class="vertical-center sun">
             <div class="container">
                <div class="row">
                    <div class="action">
                        <div class="col-sm-12">
                            <h1 class="title">Data Center</h1>
                            <p>Here you can access SciBase database. An exhaustive repository of Journals with respective Articles and Author information.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!--/#action-->
    <section id="article-search">

        <div class="row selection-row"  >
            <div class = "container">
                <div class="col-sm-3">
                    <select class="test-select" id="journal">
                        <option value = "all" selected>All Journals</option>
                        {{#each dataset.journal_data}}
                            <option value="{{name}}"> {{name}} </option>
                        {{else}}
                            <option value="0">No data</option>
                        {{/each}}
                    </select>
                </div>
                <div class="col-sm-3">
                    <select class="test-select" id="author">
                        <option value = "all" selected>All Authors</option>
                        {{#each dataset.author_data}}
                            <option value="{{name}}"> {{name}} </option>
                        {{else}}
                            <option value="0">No data</option>
                        {{/each}}
                    </select>
                </div> 
                <div class="col-sm-3">
                    <select class="test-select" id="country">
                        <option value = "all" selected>All Countries</option>
                        {{#each dataset.country_data}}
                            <option value="{{name}}"> {{name}} </option>
                        {{else}}
                            <option value="0">No data</option>
                        {{/each}}
                    </select>
                </div>
                <div class="col-sm-3">
                    <select class="test-select" id="year">
                        <option value = "all" selected>All Years</option>
                        {{#each dataset.year_data}}
                            <option value="{{year}}"> {{year}} </option>
                        {{else}}
                            <option value="0">No data</option>
                        {{/each}}
                    </select>
                </div>

            </div>
        </div>
        <div class="row" style = "margin-top:10px;">
            <div class="container">
                <button class="btn btn-md btn-primary pull-right"><span class="fa fa-download"></span> Download Data</button>
            </div>
        </div>
      <!--  <div class="loading"><i class="fa fa-spinner fa-pulse fa-3x fa-fw"></i></div> -->
        <div class="row table-row">
            <div class="container">
                <table id="article-table" class="table table-hover">
                    <thead>
                      <tr>
                        <th>TITLE</th>
                        <th>DOI</th>
                        <th>MONTH</th>
                        <th>YEAR</th>
                        
                      </tr>
                    </thead>
                    <tbody>
                        {{#each dataset.article_data}}
                          <tr>
                            <td>{{title}}</td>
                            <td>{{doi}}</td>
                            <td>{{month}}</td>
                            <td>{{year}}</td>
                            
                          </tr>
                        {{/each}}
                    </tbody>
                </table>
            </div>
        </div>
    </section>
    <!-- article search section ends-->
    <script src="/socket.io/socket.io.js"></script>
    <script type="text/javascript">
        $(document).ready(function(){

            var socket = io();
            $(".test-select").select2({
                theme:"bootstrap"
            });

            $('#article-table').dynatable();

            $(".test-select").on("change", function(e){
                var filterSearch = {};
                filterSearch.journal = $("#journal").val();
                filterSearch.author = $("#author").val();
                filterSearch.country = $("#country").val();
                filterSearch.year = $("#year").val();
                console.log("here");
                socket.emit('filterSearch_request', filterSearch);
                console.log("emmited");

            });
            socket.on('filterSearch_response', function(filterResult){
                console.log("responded");

                var select2AuthorVal = $("#author").val();

                var select2AuthorList= '<option value="all">All Authors</option>';
                $.each(filterResult.author_data, function(i, item){
                    select2AuthorList += '<option value="'+item.name+'"';
                    select2AuthorList += (item.name == select2AuthorVal)?'selected':' ';
                    select2AuthorList += '>'+item.name+'</option>';
                });
                
                $("#author").html(" ").promise().done(function(){
                    $("#author").html(select2AuthorList);
                });

                var select2YearVal= $("#year").val();
                var select2YearList= '<option value="all">All Years</option>';
                $.each(filterResult.year_data, function(i, item){
                    select2YearList += '<option value="'+item.year+'"';
                    select2YearList += (item.year == select2YearVal)?'selected':' ';
                    select2YearList += '>'+item.year+'</option>';
                });
                
                $("#year").html(" ").promise().done(function(){
                    $("#year").html(select2YearList);
                });

                var dynatable = $('#article-table').dynatable({
                    dataset : {
                        records : filterResult.article_data
                    }
                }).data('dynatable');

                dynatable.settings.dataset.originalRecords = filterResult.article_data;
                dynatable.process();
            });
        });
    </script>
   

    <footer id="footer">
        <div class="container">
            <div class="row">
                <div class="col-sm-12 text-center bottom-separator">
                    <img src="images/home/under.png" class="img-responsive inline" alt="">
                </div>
                <div class="col-md-4 col-sm-6">
                </div>
                <div class="col-md-3 col-sm-6">
                    <div class="contact-info bottom">
                        <h2>Contacts</h2>
                        <address>
                        E-mail: <a href="mailto:scibase@pes.edu">scibase@pes.edu</a> <br> 
                        </address>

                        <h2>Address</h2>
                        <address>
                        PES Institute of Technology - Bangalore South Campus <br> 
                        Hosur Road, <br> 
                        (1km before Electronic City), <br> 
                        Bangalore KA - 560100 <br> 
                        </address>
                    </div>
                </div>
                <div class="col-md-4 col-sm-12">
                    <div class="contact-form bottom">
                        <h2>Send a message</h2>
                        <form id="main-contact-form" name="contact-form" method="post" action="sendemail.php">
                            <div class="form-group">
                                <input type="text" name="name" class="form-control" required="required" placeholder="Name">
                            </div>
                            <div class="form-group">
                                <input type="email" name="email" class="form-control" required="required" placeholder="Email Id">
                            </div>
                            <div class="form-group">
                                <textarea name="message" id="message" required="required" class="form-control" rows="8" placeholder="Your text here"></textarea>
                            </div>                        
                            <div class="form-group">
                                <input type="submit" name="submit" class="btn btn-submit" value="Submit">
                            </div>
                        </form>
                    </div>
                </div>
                <div class="col-sm-12">
                    <div class="copyright-text text-center">
                        <p>&copy; SciBase | PES Institute of Technology - Bangalore South Campus. All Rights Reserved.</p>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!--/#footer-->
    